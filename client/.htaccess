<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Redirect HTTP to HTTPS
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # Don't rewrite existing files and directories
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Rewrite all requests to index.html for React Router
  RewriteRule ^ index.html [QSA,L]
</IfModule>

# Cache busting for static files
<FilesMatch "^.*\.(?:css|js|png|jpg|jpeg|gif|svg|woff|woff2)$">
  Header set Cache-Control "public, max-age=31536000"
</FilesMatch>

# Disable caching for HTML files (they update frequently)
<FilesMatch "\.html$">
  Header set Cache-Control "public, max-age=0, must-revalidate"
</FilesMatch>

# Enable gzip compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>
